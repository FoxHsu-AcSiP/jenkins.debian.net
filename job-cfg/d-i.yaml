- job-template:
    name: '{name}-manual'
    description: 'Shall build d-i manual one day, does not do that yet.{do_not_edit}'
    scm:
      - svn:
         url: svn://svn.debian.org/svn/d-i/trunk
         basedir: .
         workspaceupdater: update
         includedRegions: '/trunk/manual/.*'
         excludedRegions: ''
         excludedUsers: ''
         excludedRevprop: ''
         excludedCommitMessages: ''
         viewvc-url: http://anonscm.debian.org/viewvc/d-i/trunk

    builders:
      - shell: 'ls'
    triggers:
      - pollscm: "*/30 * * * *"
    publishers:
      - logparser:
         rulespath: '/srv/jenkins/logparse/debian.rules'
         unstable_on_warning: 'true'
         fail_on_error: 'true'

- job-template:
    name: '{name}-parse_build_logs'
    description: 'Parses d-i build logs.{do_not_edit}'
    builders:
      - shell: '/srv/jenkins/bin/d-i_parse_logs.sh http://d-i.debian.org/daily-images/build-logs.html'
    triggers:
      - timed: "0 5 * * *"
    publishers:
      - logparser:
         rulespath: '/srv/jenkins/logparse/debian.rules'
         unstable_on_warning: 'true'
         fail_on_error: 'true'
# FIXME:
#    <htmlpublisher.HtmlPublisher>
#      <reportTargets>
#        <htmlpublisher.HtmlPublisherTarget>
#          <reportName>daily d-i build logs</reportName>
#          <reportDir>.</reportDir>
#          <reportFiles>build-logs.html</reportFiles>
#          <keepAll>true</keepAll>
#          <wrapperName>htmlpublisher-wrapper.html</wrapperName>
#        </htmlpublisher.HtmlPublisherTarget>
#      </reportTargets>
#    </htmlpublisher.HtmlPublisher>


- project:
    name: d-i
    do_not_edit: '<br><br>Configured by <a href="http://jenkins.debian.net/userContent/about.html">jenkins-job-builder</a>, do not edit this job through the web UI.'
    jobs:
      - '{name}-manual'
      - '{name}-parse_build_logs'
 


