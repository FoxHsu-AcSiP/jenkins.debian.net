
- defaults:
    name: chroot-tests
    description: '{my_description}{do_not_edit}'
    builders:
      - shell: '/srv/jenkins/bin/chroot_tester.sh {chroot_tester_params}'
    publishers:
      - logparser:
         rulespath: '/srv/jenkins/logparse/debian.rules'
         unstable_on_warning: 'false'
         fail_on_error: 'false'

- defaults:
    name: chroot-tests+trigger
    description: '{my_description}{do_not_edit}'
    publishers:
      - logparser:
         rulespath: '/srv/jenkins/logparse/debian.rules'
         unstable_on_warning: 'false'
         fail_on_error: 'false'
      - trigger:
         project: '{my_triggers}'

- job-template:
    defaults: chroot-tests
    name: '{name}-sid_install_gnome'

- job-template:
    defaults: chroot-tests+trigger
    name: '{name}-sid_bootstrap'

- job-template:
   defaults: chroot-tests
   name: '{name}-wheezy_install_gnome'

- job-template:
    defaults: chroot-tests+trigger
    name: '{name}-wheezy_bootstrap'

- project:
    name: testjob_chroot-test
    do_not_edit: '<br><br>Configured by <a href="http://jenkins.debian.net/userContent/about.html">jenkins-job-builder</a>, do not edit this job through the web UI.'
    defaults: chroot-tests
    jobs:

      - '{name}-sid_install_gnome':
         chroot_tester_params: 'sid gnome'
         my_defaults: 'chroot-tests'
         my_description: 'Debootstrap sid, then install gnome.'

      - '{name}-sid_bootstrap':
         chroot_tester_params: 'sid'
         my_defaults: 'chroot-tests+trigger'
         my_description: 'Debootstrap sid.'
         my_triggers: 'testjob_chroot-test-sid_install_gnome'

      - '{name}-wheezy_install_gnome':
         chroot_tester_params: 'wheezy gnome'
         my_defaults: 'chroot-tests'
         my_description: 'Debootstrap wheezy, then install gnome.'

      - '{name}-wheezy_bootstrap':
         chroot_tester_params: 'wheezy'
         my_defaults: 'chroot-tests+trigger'
         my_description: 'Debootstrap wheezy.'
         my_triggers: 'testjob_chroot-test-wheezy_install_gnome'

